<VirtualHost *:80>
  ServerName *.rentalcar.com
  ServerAlias av-static-production.fareoffice.com tc-static-production.fareoffice.com static.fareoffice.com
  DocumentRoot /var/www/html/static/

  ErrorLog syslog:staticdelta
  CustomLog /var/log/httpd/staticdelta_acces.log combined

  RewriteEngine on
  RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
  RewriteRule .* - [F]

  RewriteCond %{HTTP_HOST} ^(.+)\.rentalcar.com
  RewriteRule ^(.*)$ /%1/$1 [L]

  RewriteCond %{HTTP_HOST} ^static.fareoffice.com/(.+)
  RewriteRule ^(.*)$ /%1/$1 [L]

  RewriteCond %{HTTP_HOST} !^(.+)\.rentalcar.com
  RewriteCond %{HTTP_HOST} !^static.fareoffice.com/(.+)
  RewriteRule .* - [F]

  #Set expiry dates to leverage browser cache
  <IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 0 seconds"
    ExpiresByType text/html "access plus 0 seconds"
    ExpiresByType image/gif "access plus 2 weeks"
    ExpiresByType image/jpeg "access plus 2 weeks"
    ExpiresByType image/png "access plus 2 weeks"
    ExpiresByType text/css "access plus 1 days"
    ExpiresByType text/javascript "access plus 1 days"
    ExpiresByType application/x-javascript "access plus 1 days"
    ExpiresByType application/javascript "access plus 1 days"
  </IfModule>

  #Enable gzip compression
  <Location />
    #Insert filter
    SetOutputFilter DEFLATE

    # Don't compress images
    SetEnvIfNoCase Request_URI \
    \.(?:gif|jpe?g|png)$ no-gzip dont-vary

    # Make sure proxies don't deliver the wrong content
    Header append Vary User-Agent env=!dont-vary
  </Location>
</VirtualHost>
<VirtualHost *:443>
  ServerName *.rentalcar.com
  ServerAlias av-static-production.fareoffice.com tc-static-production.fareoffice.com static.fareoffice.com
  DocumentRoot /var/www/html/static/

  ErrorLog syslog:staticdelta
  CustomLog /var/log/httpd/staticdelta_acces.log combined

  RewriteEngine on
  RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
  RewriteRule .* - [F]

  RewriteCond %{HTTPS_HOST} ^(.+)\.rentalcar.com
  RewriteRule ^(.*)$ /%1/$1 [L]

  RewriteCond %{HTTPS_HOST} ^static.fareoffice.com/(.+)
  RewriteRule ^(.*)$ /%1/$1 [L]

  RewriteCond %{HTTP_HOST} !^(.+)\.rentalcar.com
  RewriteCond %{HTTP_HOST} !^static.fareoffice.com/(.+)
  RewriteRule .* - [F]

  SSLEngine on
  SSLProtocol -all +SSLv3 +TLSv1
  #NEW ENTORY
  SSLHonorCipherOrder On
  SSLCipherSuite ECDHE-RSA-AES128-SHA256:AES128-GCM-SHA256:RC4:HIGH:!MD5:!aNULL:!EDH

  #SSLCipherSuite ALL:!aNull:!EDH:!DH:!ADH:!eNull:!LOW:!EXP:RC4+RSA+SHA1:+HIGH:+MEDIUM
  SSLCertificateFile /etc/httpd/ssl/ssl-static/wild.rentalcar.com.crt
  SSLCertificateKeyFile /etc/httpd/ssl/ssl-static/wild.rentalcar.com.key
  SSLCertificateChainFile /etc/httpd/ssl/ssl-static/ca/__rentalcar_com_interm.cer

  #Set expiry dates to leverage browser cache
  <IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 0 seconds"
    ExpiresByType text/html "access plus 0 seconds"
    ExpiresByType image/gif "access plus 2 weeks"
    ExpiresByType image/jpeg "access plus 2 weeks"
    ExpiresByType image/png "access plus 2 weeks"
    ExpiresByType text/css "access plus 1 days"
    ExpiresByType text/javascript "access plus 1 days"
    ExpiresByType application/x-javascript "access plus 1 days"
    ExpiresByType application/javascript "access plus 1 days"
  </IfModule>

  #Enable gzip compression
  <Location />
    #Insert filter
    SetOutputFilter DEFLATE

    # Don't compress images
    SetEnvIfNoCase Request_URI \
    \.(?:gif|jpe?g|png)$ no-gzip dont-vary

    # Make sure proxies don't deliver the wrong content
    Header append Vary User-Agent env=!dont-vary
  </Location>
</VirtualHost>