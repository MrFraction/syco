NameVirtualHost *:443
<VirtualHost *:443>
  ServerName pbk.partnerbookingkit.com
  ServerAlias prod-av.partnerbookingkit.com prod-tc.partnerbookingkit.com uat.partnerbookingkit.com uat-av.partnerbookingkit.com uat-tc.partnerbookingkit.com

  DocumentRoot /var/www/html

  ErrorLog syslog:pbkproxy
  CustomLog /var/log/httpd/pbk-proxy_acces.log combined

<location /dev>
 Order allow,deny
 Allow from 31.211.203.114
 
 ErrorDocument 401 default

 AuthType Basic
 AuthName "Password Required"
 AuthUserFile /opt/pbk-htaccess/.htpasswd
 Require valid-user
</location>

  #Proxy exceptions
  ProxyPass /static/delta !
  ProxyPassMatch /robots.txt !

  ProxyPass / http://127.0.0.1:9000/
  ProxyPassReverse / http://127.0.0.1:9000/
  ProxyTimeout 600
  ProxyPreserveHost on	
  # Every proxy request will have all its Via: header lines removed.
  ProxyVia Block

  <Proxy *>
    Order deny,allow
    Allow from all
  </Proxy>

  SSLEngine on
  SSLProtocol -all +SSLv3 +TLSv1
  #NEW ENTORY
  SSLHonorCipherOrder On
  SSLCipherSuite ECDHE-RSA-AES128-SHA256:AES128-GCM-SHA256:RC4:HIGH:!MD5:!aNULL:!EDH

  #SSLCipherSuite ALL:!aNull:!EDH:!DH:!ADH:!eNull:!LOW:!EXP:RC4+RSA+SHA1:+HIGH:+MEDIUM
  SSLCertificateFile /etc/httpd/ssl/ssl-pbk/wild.partnerbookingkit.com.crt
  SSLCertificateKeyFile /etc/httpd/ssl/ssl-pbk/wild.partnerbookingkit.com.key
  SSLCertificateChainFile /etc/httpd/ssl/ssl-pbk/geotrust-ca.pem

  #Set expiry dates to leverage browser cache
  <IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 0 seconds"
    ExpiresByType text/html "access plus 0 seconds"
    ExpiresByType image/gif "access plus 2 weeks"
    ExpiresByType image/jpeg "access plus 2 weeks"
    ExpiresByType image/png "access plus 2 weeks"
    ExpiresByType text/css "access plus 1 days"
    ExpiresByType text/javascript "access plus 1 days"
    ExpiresByType application/x-javascript "access plus 1 days"
    ExpiresByType application/javascript "access plus 1 days"
  </IfModule>

  #Enable gzip compression
  <Location />
    # Insert filter
    SetOutputFilter DEFLATE

    # Don't compress images
    SetEnvIfNoCase Request_URI \
    \.(?:gif|jpe?g|png)$ no-gzip dont-vary

    # Make sure proxies don't deliver the wrong content
    Header append Vary User-Agent env=!dont-vary
  </Location>
</VirtualHost>

NameVirtualHost *:80
<VirtualHost *:80>
  ServerName pbk.partnerbookingkit.com
  ServerAlias prod-av.partnerbookingkit.com prod-tc.partnerbookingkit.com uat.partnerbookingkit.com uat-av.partnerbookingkit.com uat-tc.partnerbookingkit.com

  DocumentRoot /var/www/html

  ErrorLog syslog:pbkproxy
  CustomLog /var/log/httpd/pbk-proxy_acces.log combined

<location /dev>
 Order allow,deny
 Allow from 31.211.203.114
 
 ErrorDocument 401 default

 AuthType Basic
 AuthName "Password Required"
 AuthUserFile /opt/pbk-htaccess/.htpasswd
 Require valid-user
</location>

  #Proxy exceptions
  ProxyPass /static/delta !
  ProxyPassMatch /robots.txt ! 

  ProxyPass / http://127.0.0.1:9000/
  ProxyPassReverse / http://127.0.0.1:9000/
  ProxyTimeout 600
  ProxyPreserveHost on	
  # Every proxy request will have all its Via: header lines removed.
  ProxyVia Block

  <Proxy *>
    Order deny,allow
    Allow from all
  </Proxy>

  #Set expiry dates to leverage browser cache
  <IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 0 seconds"
    ExpiresByType text/html "access plus 0 seconds"
    ExpiresByType image/gif "access plus 2 weeks"
    ExpiresByType image/jpeg "access plus 2 weeks"
    ExpiresByType image/png "access plus 2 weeks"
    ExpiresByType text/css "access plus 1 days"
    ExpiresByType text/javascript "access plus 1 days"
    ExpiresByType application/x-javascript "access plus 1 days"
    ExpiresByType application/javascript "access plus 1 days"
  </IfModule>

  #Enable gzip compression
  <Location />
    # Insert filter
    SetOutputFilter DEFLATE

    # Don't compress images
    SetEnvIfNoCase Request_URI \
    \.(?:gif|jpe?g|png)$ no-gzip dont-vary

    # Make sure proxies don't deliver the wrong content
    Header append Vary User-Agent env=!dont-vary
  </Location>
</VirtualHost>