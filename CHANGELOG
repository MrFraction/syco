TODO
====

Version 0.2
-----------
* See syco-private step 1-6
* Change version in app.py, set tag for version 0.2

Version 0.3
-----------
* installBind
* iptables-setup
  http://lonesysadmin.net/2007/10/29/how-to-install-a-tftp-server-on-red-hat-enterprise-linux/
  # /etc/sysconfig/iptables-config
  # Add IPTABLES_MODULES="ip_conntrack_tftp"


Version 0.4 (Backup)
--------------------
* Create backup for all syco servers.
* Some "monitor" script that will validate that all servers has been backuped
  and then email info to the sysop mail. Or report somewhere else.
* Setup of secondary backupserver, that mirrors primary backup server.
* Setup backup of none syco servers.
* Tune crontab, so it gets time to backup all servers in the choosen period.

Version 0.4
-----------
* installNagios

Version 3.6
-----------
* installHudson
* installSonar

Version 3.8
-----------
* Set the linux root email address. The one that are emailed when for example sudo is executed without permission.
* Remove fareoffice relations in the public scripts and documentation.
* Upgrade scripts to centos 5.6
  http://lists.centos.org/pipermail/centos-announce/2011-April/017282.html

Version 3.9 (iptables)
----------------------
# Refactor iptable.py, add a rule chain that can be controlled from other scripts?
# Iptable rules on fo-tp-install should be synced in iptables-setup.
* Are all iptables rules tested and moved to iptables-setup.
* Create the allowed_tcp/udp directly under INPUT to first filter on tcp or udp. 
  This will optimize all rules by "50%".
* Don't try to delete chains, when they don't exist. To remove the error message from iptables.

Version 4
---------
* Move all companies repos to git or create install-svn.
* Is the ram option in install.cfg working? gf computer hasn't enough memory.
* Add right licence to all files. Add licence file to root folder.
* remote-install-ssh-keys (on all syco-servers)
* Move all host dependent functions from app.py to it's own host/device class.
  That will be instansiated from config.py.
  config.getHost("fo-tp-install").get_mac()
  config.getHost("fo-tp-install").get_ip()

Monitor
-------
* Check this http://snorby.org/
* Check cpu sensors (temp), IPMI??
* Build report tool to check swap memory.
  A webserver should never ever have to swap, as swapping increases the latency
  of each request beyond a point that users consider "fast enough".
* Monitor cpu temp

Hardening
---------
* installClam
* Read http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Security_Guide/index.html
* Harden kickstart files according to
  http://kickstart-maker.googlecode.com/svn-history/r20/trunk/kickstart.template
  http://kickstart-maker.googlecode.com/svn-history/r20/trunk/post/
* Harden according to, or later version.
  http://www.nsa.gov/ia/_files/os/redhat/rhel5-guide-i731.pdf
* Harden, remove/disable these services
  hplip,isdn,kudzu,xfs,nfs,xinetd,rhnsd,kdump,readahead_later,messagebus,haldaemon,apm
* Add user used by syco, so it don't need to use root. Then prevent root ssh login.
  user --name=syco --uid=500 --groups=wheel,root --password=nothingspecial
* Immunize all config files with "chattr +i xx", files that shouldn't be modified by anyone.
* semanage on all files we are using chcon on.
* Mask password that are written to the stdout.
* Add epel repo to fo-tp-install
  repo --name=lepel       --baseurl=http://10.0.0.1:81/yum-repos/epel/i386

Remote-install
--------------
* install-guests "virsh list" just print a .
* Looks like the kvm host machines doesn't get any gateway after the installation.
  /etc/sysconfig/network
* remote-install should log all output to file, one for each server/thread.
  http://docs.python.org/library/logging.html#logging-to-multiple-destinations
  http://stackoverflow.com/questions/616645/how-do-i-duplicate-sys-stdout-to-a-log-file-in-python
* Looks like remote-install are doing multiple installations to the same server
  at the same time. Maybe starting multiple threads for each server.
* syco remote-install, should loop and wait for all clients to become alive.
  Then run all commands on them.
* The guests should use the repos from the cobbler server.
* The guest should be locally "firewalled" to not be able to reach out to
  anything more then they need.
* Run "remote-install-deamon" on cobbler server.
* The remote-install deamon should check for changes in install.cfg.
* Add all output from syco to a log file.
* Add "syco remote-install" in kickstart for fo-tp-install

Version 5
---------
* Add reviewboard.com to vcs server???
* Check "gerrit" code review software and implement on vcs server.
* Configure openvpn for ubuntu https://help.ubuntu.com/10.04/serverguide/C/openvpn.html
* configure installCA, merge with CA stuff in installOpenVpn?
* installOpenvpn, has the client openvpn certs a unique common name?
* installOpenvpn, harden openvpn, jailroot, ta.key, Unprivileged mode
  http://openvpn.net/index.php/open-source/documentation/howto.html#security
* See all todos in installMysql
* User can use syco with a console/shell behaviour. Much like mysql, virsh,
  asadmin console. The user can login to a remote host and run local commands.
  http://docs.python.org/library/cmd.html
  http://jessenoller.com/2009/02/05/ssh-programming-with-paramiko-completely-different/

STABILITY
---------
* install-mysql-replication should wait until users are installed on primary database.

LDAP
----
* Setup kickstart to use LDAP
  http://web.archiveorange.com/archive/v/YcynVMg4S203uVyu3ZFc
* Enable sudo for LDAP users.
  http://electromech.info/sudo-ldap-with-rhds-linux-open-source.html
* SSSD or NSCD
* Setup password policy
* Two-factor auth with http://www.wikidsystems.com/ or something else.
* Use SASL?
* Use KERBEROS?
* Use Radius?
* Store hosts in ldap?
* Backup the LDAP database. Primary the passwords need backup.
* Install secondary "read-only" ldap server.
* Read for more features
  http://www.openldap.org/doc/admin24/OpenLDAP-Admin-Guide.pdf
* nfs mount fo-tp-file?
* vpn create sync with ldap users.

Other
-----
* Check articles http://articles.slicehost.com/sitemap

On Call (Linux Ocean?)
----------------------
* Surrvelience service, an sms is sent when somehting is wrong. The on call guy
  needs to report back to a system, that the error is notified. Otherwiese
  a new sms is sent to the second on call guy.

CHANGELOG
=========
MAHE=Mattias Hemmingsson
DALI=Daniel Lindh

110205 DALI - Create webpage for systemconsole.github.com
110205 DALI - Removed changelog from all scripts. The changelog is to be found
              in the git log.
110204 DALI - Rename project to syco (System Console) and pushed to
              github.com/systemconsole/syco.git
110304 DALI - When user add -f (force) to command line, version.check_executed()
              ignores value in version.cfg.
110304 DALI - When user run an uninstall command, the version.cfg should be reset to version 0.
110304 DALI - vir-list, show all guests on all hosts based on install.cfg
110212 DALI - installHttpd workign with httpd and mod_sec.
110212 DALI - Added scripts that should be executed during installation phase.
110212 DALI - Renamed fo-tp-svn to fo-tp-vcs (version control system).
110212 DALI - Disabled modsec rule "block not allowed urls.", things got to complicated in installFarepayment.
110212 DALI - Enable SELinux httpd_can_network_connect on apache servers, to get mod_proxy working.
110212 DALI - Modsecurity-crs file was downloaded to the wrong filename.
110212 DALI - Automatically delete install dir when syco exit.
110212 DALI - Set java and java_home path for the currently logged in user, when installing glassfish.
110210 DALI - Move private plugins from bin/private to usr/
110210 DALI - Moving private files to private repo.
110207 DALI - Adding configuration of httpd and modsec for farepayment.
110205 DALI - Added allowed_udp chain to use with UDP rules for iptables.
110205 DALI - Added support for httpd and modsecurity for iptables.
110128 DALI - Version 1.0.0 of installFarepayment completed.
110203 DALI - Fixes in installFarepayment after previous refactoring.
110203 DALI - Bugfixing in glassfish installation after all refactoring.
110203 DALI - shell_exec didn't execute the command in the current working directory.
110203 DALI - download_file only need first argument, and will download the file to install dir
110203 DALI - Changed name of svn user to syscon.
110203 DALI - Saving passwords to file after they have been executed entered by user.
110203 DALI - Invalid use of variables in version.mark_executed(), crashed the program.
110203 DALI - Use the constants GLASSFISH_PATH, GLASSFISH_DOMAINS_PATH, GLASSFISH_START_SCRIPT_PATH everywhere.
110203 DALI - Replace /opt/syco with app.SYCO_PATH in all files.
110203 DALI - Changed use of shell_exec to asadmin_exec
110201 DALI - Fixed the output of print_verbose and shell_exec.
110201 DALI - Replaced shell_exec with shell_exec_p everywhere in the code.
110201 DALI - Refactoring and comments in general.py.
110201 DALI - Some minor refactoring and commenting in app.py
110201 DALI - Fixed unused imports (found by netbeans)
110130 DALI - Refactoring the use off class Version.
110129 DALI - Refactoring and cleaning up the SSH code.
110129 DALI - Use PasswordStore everywhere in the code where passwords are used.
110129 DALI - Adding file header and comments to all syco files.
110129 DALI - Added public and private command types, refactoring of code.
110128 DALI - Added git-clean command
110128 DALI - Version 1.0.0 of installFarepayment completed.
110128 DALI - Version 1.0.0 of PasswordStore completed.
110127 DALI - installFarepayment, create database, deploy ear
110127 DALI - installGlassfish.py script
110124 DALI - More secure configuration of NTP. (Still missing optimal iptables)
110123 DALI - Working draft of installNTP.py
110121 DALI - Draft of install-mysql
110121 DALI - setup_iptables for installMysql
110121 DALI - Working install-mysql
110121 DALI - Working install-mysql-replication.
101215 DALI - Install pexpect on all syco servers.
101214 DALI - Write installVpn.py script to install openvpn.
101210 DALI - Indicate disk space to use for a guest in install.cfg
101210 DALI - Configure install.cfg to use all computers.
101210 DALI - Read "configuration" of which commands to use from the dir bin/syco/syco/
              http://stackoverflow.com/questions/1057431/loading-all-modules-in-a-folder-in-python/1057765#1057765
101209 DALI - Install all servers with pxe.
101209 DALI - Move dhcp to fo-tp-install
